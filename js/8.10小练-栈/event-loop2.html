<script>
    //  0 2 4 3 1
    async function foo() {
        await bar();  
        console.log(1);  // 微3
    }
    async function bar() {
        console.log(0)  // 1
        Promise.resolve(3).then(console.log) // 微2
        return new Promise((resolve, reject) => {
            console.log(2)   // 2
            setTimeout(() => { resolve() })  // 宏
        })
    }
    Promise.resolve(4).then(console.log)  // 微1
    foo()  //  start 
</script>